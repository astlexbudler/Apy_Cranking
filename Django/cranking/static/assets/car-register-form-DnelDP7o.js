import{j as e,B as m,a as u,r as p,T as f,I as L,b as x,P as C,p as I}from"./index-OSHjpEom.js";import{z as t,u as R,t as B,F as O}from"./form-provider-By_UTwdL.js";import{A}from"./alert-custom-B4zA1k0X.js";import{F as n}from"./fields-BMzgYp9w.js";import{S as z,a as E,b as N,L as U}from"./Stepper-CjHqZktx.js";import{L as V}from"./List-DhaKcT6X.js";import{L as $}from"./ListItem-W1Z_0NnS.js";import{L as D}from"./ListItemText-A0pJ6c80.js";function H({steps:i,activeStep:c}){return e.jsx(z,{activeStep:c,alternativeLabel:!0,sx:{mb:5},children:i.map((l,d)=>e.jsx(E,{children:e.jsx(N,{slots:{stepIcon:({active:s,completed:a})=>e.jsx(m,{sx:{width:24,height:24,display:"flex",borderRadius:"50%",alignItems:"center",color:"text.disabled",typography:"subtitle2",justifyContent:"center",bgcolor:"action.disabledBackground",...s&&{bgcolor:"primary.main",color:"primary.contrastText"},...a&&{bgcolor:"primary.main",color:"primary.contrastText"}},children:a?e.jsx(u,{width:14,icon:"mingcute:check-fill"}):e.jsx(m,{sx:{typography:"subtitle2"},children:d+1})})},children:l})},l))})}function K(){return p.useState(!1),e.jsxs(e.Fragment,{children:[e.jsx(f,{variant:"h6",sx:{color:"text.primary"},children:"차량 정보 확인"}),e.jsx(n.Text,{name:"stepOne.number",label:"차량 번호 입력",placeholder:"예) 12가 3456",helperText:"차량 번호를 이용하여 차량 정보를 조회합니다.",slotProps:{inputLabel:{shrink:!0}}})]})}function _(){return e.jsxs(e.Fragment,{children:[e.jsx(n.Text,{name:"stepTwo.name",label:"차량 이름",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(n.Text,{name:"stepTwo.manufacturer",label:"차량 제조사",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(n.Text,{name:"stepTwo.carType",label:"차량 종류",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(n.Text,{name:"stepTwo.carSize",label:"차량 크기",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(n.Text,{name:"stepTwo.year",label:"차량 연식",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(n.Text,{name:"stepTwo.cc",label:"차량 배기량",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(n.Text,{name:"stepTwo.fuel",label:"차량 연료",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(n.Text,{name:"stepTwo.transmission",label:"차량 변속기",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(n.Text,{name:"stepTwo.color",label:"차량 색상",slotProps:{inputLabel:{shrink:!0}}}),e.jsx(n.Text,{name:"stepTwo.identificationNumber",label:"차대 번호",slotProps:{inputLabel:{shrink:!0}}})]})}function q(){const[i,c]=p.useState([]),l=s=>{const a=s.target.files;a&&c(h=>[...h,...Array.from(a)])},d=s=>{c(a=>a.filter((h,g)=>g!==s))};return e.jsxs(m,{children:[e.jsx(f,{variant:"h6",gutterBottom:!0,children:"파일 업로드"}),e.jsx(n.File,{name:"stepThree.images",label:"차량 사진 업로드",slotProps:{inputLabel:{shrink:!0}},multiple:!0,accept:"image/*",onChange:l,value:i.map(s=>URL.createObjectURL(s)),renderInput:s=>e.jsx(n.TextField,{...s,InputProps:{...s.InputProps,endAdornment:e.jsx(L,{onClick:()=>c([]),size:"small",sx:{ml:1},children:e.jsx(u,{icon:"tabler:trash",width:20})})}})}),e.jsxs(x,{variant:"outlined",component:"label",startIcon:e.jsx(u,{icon:"solar:upload-bold"}),sx:{mb:2},children:["파일 선택",e.jsx("input",{type:"file",hidden:!0,multiple:!0,onChange:l})]}),i.length>0&&e.jsxs(C,{variant:"outlined",sx:{p:2},children:[e.jsx(f,{variant:"subtitle1",sx:{mb:1},children:"업로드된 파일"}),e.jsx(V,{children:i.map((s,a)=>e.jsxs($,{secondaryAction:e.jsx(L,{edge:"end",onClick:()=>d(a),children:e.jsx(u,{icon:"tabler:trash",width:20})}),children:[e.jsx(m,{component:"img",src:URL.createObjectURL(s),alt:s.name,sx:{width:40,height:40,borderRadius:1,mr:2}}),e.jsx(D,{primary:s.name,secondary:`${(s.size/1024).toFixed(1)} KB`})]},a))})]})]})}const G=t.object({number:t.string().min(1,{message:"차량 번호를 입력해주세요."}).max(20,{message:"차량 번호는 20자 이하로 입력해주세요."}).refine(()=>!1,{message:"아직 API 연결이 되지 않았습니다."})}),J=t.object({name:t.string().min(1,{message:"차량 이름을 입력해주세요."}).max(50,{message:"차량 이름은 50자 이하로 입력해주세요."}),manufacturer:t.string().min(1,{message:"제조사를 입력해주세요."}).max(50,{message:"제조사는 50자 이하로 입력해주세요."}),carType:t.string().min(1,{message:"차량 종류를 입력해주세요."}).max(50,{message:"차량 종류는 50자 이하로 입력해주세요."}),carSize:t.string().min(1,{message:"차량 크기를 입력해주세요."}).max(50,{message:"차량 크기는 50자 이하로 입력해주세요."}),year:t.string().min(1,{message:"연도를 입력해주세요."}).max(4,{message:"연도는 4자리로 입력해주세요."}),cc:t.string().min(1,{message:"배기량을 입력해주세요."}).max(10,{message:"배기량은 10자 이하로 입력해주세요."}),fuel:t.string().min(1,{message:"연료 종류를 입력해주세요."}).max(50,{message:"연료 종류는 50자 이하로 입력해주세요."}),transmission:t.string().min(1,{message:"변속기를 입력해주세요."}).max(50,{message:"변속기는 50자 이하로 입력해주세요."}),color:t.string().min(1,{message:"차량 색상을 입력해주세요."}).max(50,{message:"차량 색상은 50자 이하로 입력해주세요."}),identificationNumber:t.string().min(1,{message:"차대번호를 입력해주세요."}).max(50,{message:"차대번호는 50자 이하로 입력해주세요."})}),M=t.object({images:t.array(t.string()).min(1,{message:"사진을 업로드해주세요."}).max(5,{message:"사진은 최대 5개까지 업로드 가능합니다."})}),j=["차량 번호 입력","차량 정보 확인","사진 업로드"];function ae(){const i=R({resolver:B(t.object({stepOne:G,stepTwo:J,stepThree:M})),defaultValues:{stepOne:{number:""},stepTwo:{name:"",manufacturer:"",carType:"",carSize:"",year:"",cc:"",fuel:"",transmission:"",color:"",identificationNumber:""},stepThree:{images:[]}},mode:"onChange"}),{reset:c,handleSubmit:l,getValues:d,trigger:s,clearErrors:a,formState:{errors:h,isSubmitting:g}}=i,[r,b]=p.useState(0),T=p.useCallback(async o=>{o?await s(o)&&(a(),b(F=>F+1)):b(S=>S+1)},[s,a]),k=p.useCallback(()=>{b(o=>o-1)},[]),w=l(async o=>{console.log("Form data:",o)}),P=r===j.length,[v,y]=p.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(H,{steps:j,activeStep:r}),e.jsxs(O,{methods:i,onSubmit:w,children:[e.jsxs(m,{sx:[o=>({p:3,mb:3,gap:3,minHeight:240,display:"flex",borderRadius:1.5,flexDirection:"column",border:`dashed 1px ${o.vars.palette.divider}`})],children:[r===0&&e.jsx(K,{}),r===1&&e.jsx(_,{}),r===2&&e.jsx(q,{})]}),!P&&e.jsxs(m,{sx:{display:"flex",mb:5},children:[r!==0&&e.jsx(x,{onClick:k,children:"뒤로"}),e.jsx(m,{sx:{flex:"1 1 auto"}}),r===0&&e.jsx(x,{type:"submit",variant:"contained",onClick:()=>T("stepOne"),children:"다음"}),r===1&&e.jsx(x,{type:"submit",variant:"contained",onClick:()=>T("stepTwo"),children:"다음"}),r===j.length-1&&e.jsx(U,{type:"submit",variant:"contained",loading:g,children:"요청하기"})]})]}),e.jsx(A,{open:v,close:()=>y(!1),icon:e.jsx(u,{icon:"carbon:checkmark-filled",width:80,height:80,sx:{color:"success.main",mb:2}}),title:"회원가입 완료",message:"회원가입이 완료되었습니다.",buttons:e.jsx(x,{variant:"contained",color:"inherit",href:I.signIn,onClick:()=>y(!1),children:"확인"})})]})}export{ae as C};
